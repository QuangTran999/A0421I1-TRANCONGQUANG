<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<h1>Xổ số CodeGym</h1>
<input type="button" value="Mua vé số" onclick="mua_ve_so();">
<script>
    // b1: xây dựng các nút
    // b2: xây dựng các ô số bằng text(tối đa 4 vé)
    // b3: - Nếu khách hàng chọn tự nhập thì cứ mỗi ô tròn KH click vào sẽ hiển thị 1 bảng chọn số từ 0-99
    // - Nếu khách hàng chọn tuỳ chọn random thì hệ thống sẽ tự động tạo ra 6 số tương ứng 6 ô tròn
    // b4: Sau khi khách hàng hoàn tất việc chọn số trên vé thì nhấn hoàn tất để thực hiện quay số
    class XoSo{
        constructor(so1,so2,so3,so4,so5,so6) {
            this.so1 = so1;
            this.so2 = so2;
            this.so3 = so3;
            this.so4 = so4;
            this.so5 = so5;
            this.so6 = so6;
        }
    }
    var count = 0;
    var arr_mua = [];
    function mua_ve_so() {
        if (count<4){
            document.body.innerHTML='';
            do {
                var chosse = prompt("Bạn có 2 tùy chon \n1:Bạn muốn tự chọn số. \n2: Hệ thống tự random.");
            }while (chosse<0 || chosse>2);

            if(chosse==1){
                let resaul = "<input id='so1'>"
                    +"<input id='so2'>"
                    +"<input id='so3'>"
                    +"<input id='so4'>"
                    +"<input id='so5'>"
                    +"<input id='so6'>"
                    +"<input type='button' value='xác nhận' onclick='hoan_thanh_mua_ve()'>";
                count++;
                document.write(resaul);
            }else if (chosse==2){
                let so1 = Math.floor(Math.random()*99);
                let so2 = Math.floor(Math.random()*99);
                let so3 = Math.floor(Math.random()*99);
                let so4 = Math.floor(Math.random()*99);
                let so5 = Math.floor(Math.random()*99);
                let so6 = Math.floor(Math.random()*99);
                arr_mua.push(new XoSo(so1,so2,so3,so4,so5,so6));
                count++;
                display();
            }
        }else {
            alert("Quá số lần mua.");
        }
        }

    function hoan_thanh_mua_ve() {
        let so1 = (document.getElementById("so1").value);
        let so2 = (document.getElementById("so2").value);
        let so3 = (document.getElementById("so3").value);
        let so4 = (document.getElementById("so4").value);
        let so5 = (document.getElementById("so5").value);
        let so6 = (document.getElementById("so6").value);
        arr_mua.push(new XoSo(so1,so2,so3,so4,so5,so6));//chú ý kiểu thêm đối tượng trong oop
        display();
    }
    function display() {
        document.body.innerHTML='';
        let resaul = "<h1>Xổ số CodeGym</h1>";

        resaul += "<table border='1' style='width: 300px; height:30px '>";
        for(let i=0;i<arr_mua.length;i++){
            resaul += "<tr>";
            resaul += "<td>"+ arr_mua[i].so1+"</td>";
            resaul += "<td>"+ arr_mua[i].so2+"</td>";
            resaul += "<td>"+ arr_mua[i].so3+"</td>";
            resaul += "<td>"+ arr_mua[i].so4+"</td>";
            resaul += "<td>"+ arr_mua[i].so5+"</td>";
            resaul += "<td>"+ arr_mua[i].so6+"</td>";
            resaul += "</tr>"
        }
        resaul += "</table>";

        resaul += "<br><br><input type='button' value='Mua vé' onclick='mua_ve_so();'>";
        resaul += "<input type='button' value='Xem kết quả' onclick='ket_qua();'>";
        document.write(resaul);
    }
    function ket_qua() {
        var arr_kq = [];
        let so1 = Math.floor(Math.random()*99);
        let so2 = Math.floor(Math.random()*99);
        let so3 = Math.floor(Math.random()*99);
        let so4 = Math.floor(Math.random()*99);
        let so5 = Math.floor(Math.random()*99);
        let so6 = Math.floor(Math.random()*99);
        arr_kq.push(new XoSo(so1,so2,so3,so4,so5,so6));
        document.write("<br><br>Kết Quả Xổ số là:  ",arr_kq[0].so1," ",arr_kq[0].so2," ",arr_kq[0].so3," ",arr_kq[0].so4," ",arr_kq[0].so5," ",arr_kq[0].so6);
        for (let i=0;i<arr_mua.length;i++){
            if (arr_mua[i].so1==arr_kq[0].so1 && arr_mua[i].so2==arr_kq[0].so2 && arr_mua[i].so3==arr_kq[0].so3 &&
                arr_mua[i].so4==arr_kq[0].so4 && arr_mua[i].so5==arr_kq[0].so5 && arr_mua[i].so6==arr_kq[0].so6){
                alert("Chúc mừng bạn đã trúng số giải nhất.");
            }else if (arr_mua[i].so2==arr_kq[0].so2 && arr_mua[i].so3==arr_kq[0].so3 &&
                arr_mua[i].so4==arr_kq[0].so4 && arr_mua[i].so5==arr_kq[0].so5 && arr_mua[i].so6==arr_kq[0].so6){
                alert("Chúc mừng bạn đã trúng số giải nhì.");
            }else if (arr_mua[i].so4==arr_kq[0].so4 && arr_mua[i].so5==arr_kq[0].so5 && arr_mua[i].so6==arr_kq[0].so6){
                alert("Chúc mừng bạn đã trúng số giải ba.");
            }else {
                alert("Chúc bạn may mắn lần sau");
            }
        }
    }
</script>
</body>
</html>